"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[625],{683:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>h,toc:()=>a});var n=i(4848),t=i(8453),s=i(2839);const o={sidebar_position:3},l="Github",h={id:"providers/github",title:"Github",description:"Register your app in Github's Dashboard",source:"@site/docs/providers/github.mdx",sourceDirName:"providers",slug:"/providers/github",permalink:"/gatekeeper/docs/providers/github",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Google",permalink:"/gatekeeper/docs/providers/google"}},d={},a=[{value:"Register your app in Github&#39;s Dashboard",id:"register-your-app-in-githubs-dashboard",level:2},{value:"Examples:",id:"examples",level:4},{value:"Examples:",id:"examples-1",level:4},{value:"Github Provider",id:"github-provider",level:2},{value:"Options",id:"options",level:3},{value:"Handler",id:"handler",level:3},{value:"Errors",id:"errors",level:2},{value:"Examples",id:"examples-2",level:2},{value:"Example #1",id:"example-1",level:3},{value:"Register Github Provider",id:"register-github-provider",level:3},{value:"Login with Github Provider",id:"login-with-github-provider",level:3}];function c(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"github",children:"Github"}),"\n",(0,n.jsx)(r.h2,{id:"register-your-app-in-githubs-dashboard",children:"Register your app in Github's Dashboard"}),"\n",(0,n.jsx)(r.p,{children:"To use the Github Provider you will need a client id and a client secret. You will get them while following the process to setup Github OAuth 2.0 for your application. Follow the instructions in the following link:"}),"\n",(0,n.jsxs)(r.admonition,{type:"info",children:[(0,n.jsx)(r.p,{children:"When asked for an origin URL, insert the origin of the url in which your app is hosted."}),(0,n.jsx)(r.h4,{id:"examples",children:"Examples:"}),(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"http://localhost:3000"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"https://www.example.com"})}),"\n"]}),(0,n.jsx)(r.p,{children:"When asked for a redirect URL (or callback), insert[http or https]://[origin]/[your route for Github authentication]"}),(0,n.jsx)(r.h4,{id:"examples-1",children:"Examples:"}),(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"http://localhost:8000/auth/github"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"https://www.example.com/api/login/github"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.code,{children:"https://www.example.com/godel/russell/myGithubLogin"})}),"\n"]})]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app",children:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app"})}),"\n",(0,n.jsx)(r.h2,{id:"github-provider",children:"Github Provider"}),"\n",(0,n.jsx)(r.h3,{id:"options",children:"Options"}),"\n",(0,n.jsx)(s.A,{headers:["Option name","Description","Default value","Required?"],body:[[(0,n.jsx)(r.code,{children:"clientId"}),"Your Github OAuth client id","","Yes"],[(0,n.jsx)(r.code,{children:"clientSecret"}),"Your Github OAuth client secret","","Yes"],[(0,n.jsx)(r.code,{children:"callbackURL"}),"The URL that will serve as callback for Github OAuth","","Yes"],[(0,n.jsx)(r.code,{children:"scope"}),"The OAuth scopes that will be granted to the access token",(0,n.jsx)(r.code,{children:"['profile']"}),"No"]]}),"\n",(0,n.jsx)(r.admonition,{type:"danger",children:(0,n.jsxs)(r.p,{children:["To the ",(0,n.jsx)(r.code,{children:"callbackURL"})," option you must provide the URL you provided when asked for a redirect (or callback) URL when\r\nregistering your Github OAuth app."]})}),"\n",(0,n.jsx)(r.h3,{id:"handler",children:"Handler"}),"\n",(0,n.jsx)(r.p,{children:"The Github Provider passes two parameters to the handler:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"access_token"}),": The OAuth access token."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"profile"}),": The information of the Github user."]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"errors",children:"Errors"}),"\n",(0,n.jsx)(r.p,{children:"The predefined errors of this provider are:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"UserNotFound"}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"examples-2",children:"Examples"}),"\n",(0,n.jsx)(r.h3,{id:"example-1",children:"Example #1"}),"\n",(0,n.jsx)(r.h3,{id:"register-github-provider",children:"Register Github Provider"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-js",children:"import gatekeeper from '@sharifvelasquez/gatekeeper'\r\nimport { GithubProvider } from '@sharifvelasquez/gatekeeper/providers/github' \r\n\r\ngatekeeper.registerProvider(new GithubProvider({\r\n    clientId: '<YOUR GITHUB CLIENT ID>',\r\n    clientSecret: '<YOUR GITHUB CLIENT SECRET>',\r\n    callbackURL: 'https://www.example.com/auth/github'\r\n}, function handler(access_token, profile) => {\r\n    const user = User.findOne({ githubId: profile.sub })\r\n    \r\n    if (user == null) {\r\n        // For example, if the user does not exist, create it\r\n        User.create({\r\n            username: profile.name,\r\n            profilePicture: profile.picture\r\n        });\r\n    }\r\n    \r\n    return user;\r\n}));\n"})}),"\n",(0,n.jsx)(r.h3,{id:"login-with-github-provider",children:"Login with Github Provider"}),"\n",(0,n.jsx)(r.admonition,{type:"warning",children:(0,n.jsxs)(r.p,{children:["Important: When using the Github provider on login routes, make sure you use ",(0,n.jsx)(r.code,{children:"gatekeeper.authenticateWithProvider('<Your Github provider name>')"})," in a ",(0,n.jsx)(r.code,{children:"GET"})," route, as the user will be redirected to Github's sign in page"]})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-js",children:"router.get(\r\n    '/auth/github/*',\r\n    gatekeeper.authenticateWithProvider('github'), (req, res) => {\r\n        return res.redirect('/profile');\r\n    }\r\n);\n"})})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},2839:(e,r,i)=>{i.d(r,{A:()=>t});var n=i(4848);const t=function(e){let{headers:r,body:i}=e;return(0,n.jsxs)("table",{className:"table",children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:r.map((e=>(0,n.jsx)("th",{children:e})))})}),(0,n.jsx)("tbody",{children:i.map((e=>(0,n.jsx)("tr",{children:e.map((e=>(0,n.jsx)("td",{children:e})))})))})]})}},8453:(e,r,i)=>{i.d(r,{R:()=>o,x:()=>l});var n=i(6540);const t={},s=n.createContext(t);function o(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);